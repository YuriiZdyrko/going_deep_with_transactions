 ## Upserts

Supported by `insert`, `insert_all`.
Relies on conflicting `primary key` or `unique index` during insert.

```elixir
MyRepo.insert(
    %Post{title: "this is unique"},
    on_conflict: [set: [body: "updated"]], 
    conflict_target: :title
)
Repo.insert_all(
     MyApp.Tag, maps, on_conflict: :nothing
)
```

The :on_conflict option values:


- `:raise` - raises
- `:nothing` - ignores the error in case of conflicts
- `:replace_all` - replace all values on the existing row with the values in the schema/changeset, including autogenerated fields such as `inserted_at` and `updated_at`
- `{:replace_all_except, fields}` - same as above except the given fields are not replaced
- `{:replace, fields}` - replace only specific columns. This option requires `conflict_target`
- a keyword list of update instructions - such as the one given to `update_all/3`, for example: `[set: [title: "new title"]]`